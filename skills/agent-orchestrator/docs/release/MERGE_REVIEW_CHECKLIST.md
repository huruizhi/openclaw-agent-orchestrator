# Merge Review Checklist（强制门禁）

> 目标：防止“流程完成但需求未实现”的假完成。任一红线命中，禁止 merge。

## Gate 1: 代码有效性（必须）

- [ ] PR 不得仅包含 `docs/**` 或 `*.md` 变更。
- [ ] 至少包含一个功能代码文件变更（如 `m*/`, `scripts/`, `workflow/`, `utils/` 下的 `.py`）。
- [ ] 代码变更与 issue 描述目标一致（非占位提交）。

## Gate 2: 需求映射（必须）

- [ ] 存在 `requirement -> code -> test` 映射表。
- [ ] Issue 每条验收点都有对应实现证据与测试证据。
- [ ] 未覆盖项必须显式标记并阻断 merge。

## Gate 3: 测试与CI（必须）

- [ ] 单测/集成测试通过（附命令与结果摘要）。
- [ ] CI 关键检查全绿。
- [ ] 回归测试结果可追溯（日志/报告路径）。

## Gate 4: 评审与风险（必须）

- [ ] 至少 1 名 reviewer approve（关键模块建议 2 名）。
- [ ] PR 描述包含：变更摘要、风险、回滚方案。
- [ ] 若影响发布链路，必须包含发布前验证步骤。

## Gate 5: 发布前一致性（Milestone 级）

- [ ] 所有关联 PR 通过 Gate 1~4 后，才允许批量 merge。
- [ ] Issue 关闭应由 PR 关联自动触发或有人工关闭证据。
- [ ] 关闭 milestone 前，确认“非文档代码变更已落地”。

---

## 红线（任一命中即禁止 merge）

1. 仅文档变更（`docs/**`, `*.md`）
2. 无测试证据
3. 无需求映射
4. 无 reviewer approve
5. 变更与 issue 目标不一致
