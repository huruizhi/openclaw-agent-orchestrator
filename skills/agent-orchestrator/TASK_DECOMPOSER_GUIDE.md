# Task Decomposer - ç‹¬ç«‹ä»»åŠ¡æ‹†è§£å·¥å…·

å¿«é€Ÿã€è½»é‡çº§çš„ä»»åŠ¡æ‹†è§£å·¥å…·ï¼Œæ— éœ€åˆ›å»ºå®Œæ•´é¡¹ç›®å³å¯åˆ†è§£ä»»åŠ¡ã€‚

## ğŸ¯ ç‰¹ç‚¹

- âœ… **ç‹¬ç«‹ä½¿ç”¨**: æ— éœ€åˆ›å»º orchestrator é¡¹ç›®
- âœ… **å³æ—¶åˆ†è§£**: ç›´æ¥è¾“å…¥è¯·æ±‚ï¼Œç«‹å³è·å¾—åˆ†è§£ç»“æœ
- âœ… **å¤šç§æ¨¡å¼**: æ”¯æŒå‘½ä»¤è¡Œã€JSONã€äº¤äº’å¼ã€ç®¡é“è¾“å…¥
- âœ… **é›¶ä¾èµ–**: ä¸ä¾èµ–é¡¹ç›®çŠ¶æ€æ–‡ä»¶
- âœ… **æ™ºèƒ½è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ« 6 ç§èƒ½åŠ›ç±»å‹

## ğŸ“¦ ä½ç½®

```bash
/home/ubuntu/clawd/skills/agent-orchestrator/scripts/task_decomposer.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```bash
# è®¾ç½®åˆ«åï¼ˆæ¨èï¼‰
alias decompose="python3 /home/ubuntu/clawd/skills/agent-orchestrator/scripts/task_decomposer.py"

# åŸºæœ¬ä½¿ç”¨
decompose "å¼€å‘ç”¨æˆ·è®¤è¯æ¨¡å—ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œç¼–å†™æ–‡æ¡£"

# JSON è¾“å‡º
decompose --json "è°ƒç ”å¸‚åœºæ•°æ®ï¼Œåˆ†æç«å“"

# æŸ¥çœ‹æ”¯æŒçš„èƒ½åŠ›
decompose --capabilities

# äº¤äº’æ¨¡å¼
decompose --interactive
```

### ç®¡é“è¾“å…¥

```bash
# ä»æ ‡å‡†è¾“å…¥è¯»å–
echo "éƒ¨ç½²åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ" | decompose --stdin

# ä»æ–‡ä»¶è¯»å–
cat request.txt | decompose --stdin

# ä¸å…¶ä»–å‘½ä»¤ç»„åˆ
echo "åˆ†ææ—¥å¿—æ–‡ä»¶ï¼Œæ‰¾å‡ºå¼‚å¸¸" | decompose --stdin | grep "èƒ½åŠ›:"
```

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å¤šèƒ½åŠ›ä»»åŠ¡

```bash
$ decompose "ç¼–å†™ç¨‹åºè·å– Hacker News æœ€æ–° 30 æ¡ä¿¡æ¯ è¿›è¡Œæµ‹è¯• å®Œæˆ ä½¿ç”¨æ–‡æ¡£ç¼–å†™"

============================================================
è¯·æ±‚åˆ†è§£ç»“æœ
============================================================

åŸå§‹è¯·æ±‚:
  ç¼–å†™ç¨‹åºè·å– Hacker News æœ€æ–° 30 æ¡ä¿¡æ¯ è¿›è¡Œæµ‹è¯• å®Œæˆ ä½¿ç”¨æ–‡æ¡£ç¼–å†™

è¯†åˆ«èƒ½åŠ›: coding, testing, docs
ä»»åŠ¡æ•°é‡: 3

============================================================
åˆ†è§£åçš„ä»»åŠ¡:
============================================================

[Task 1] å¼€å‘ä¸å®ç°
  èƒ½åŠ›: coding
  æè¿°: ç¼–å†™ç¨‹åºè·å– Hacker News æœ€æ–° 30 æ¡ä¿¡æ¯

[Task 2] æµ‹è¯•éªŒè¯
  èƒ½åŠ›: testing
  æè¿°: å¯¹å·²å®Œæˆçš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•éªŒè¯ï¼š...ï¼ˆåŒ…æ‹¬åŠŸèƒ½æµ‹è¯•ã€è¾¹ç•Œæ¡ä»¶ã€é”™è¯¯å¤„ç†ï¼‰
   (ä¾èµ–: task-1)

[Task 3] æ–‡æ¡£ç¼–å†™
  èƒ½åŠ›: docs
  æè¿°: ç¼–å†™ä½¿ç”¨æ–‡æ¡£ï¼š...ï¼ˆåŒ…æ‹¬å®‰è£…ã€é…ç½®ã€ä½¿ç”¨ç¤ºä¾‹ï¼‰
   (ä¾èµ–: task-2)
```

### ç¤ºä¾‹ 2: å•èƒ½åŠ›ä»»åŠ¡

```bash
$ decompose "è®¿é—®moltç½‘ç«™è·å–æœ€ç«çƒ­å¸–å­ï¼Œåˆ†ææ•´ç†åç”ŸæˆæŠ€æœ¯åšå®¢"

è¯†åˆ«èƒ½åŠ›: research
ä»»åŠ¡æ•°é‡: 1

[Task 1] èµ„æ–™è°ƒç ”ä¸åˆ†æ
  èƒ½åŠ›: research
  æè¿°: è¿›è¡Œèµ„æ–™è°ƒç ”ä¸åˆ†æï¼šè®¿é—®moltç½‘ç«™è·å–æœ€ç«çƒ­å¸–å­ï¼Œåˆ†ææ•´ç†åç”ŸæˆæŠ€æœ¯åšå®¢
```

### ç¤ºä¾‹ 3: JSON è¾“å‡ºï¼ˆä¾¿äºç¨‹åºå¤„ç†ï¼‰

```bash
$ decompose --json "å¼€å‘è®¤è¯æ¨¡å—ï¼Œæµ‹è¯•ï¼Œå†™æ–‡æ¡£"

{
  "request": "å¼€å‘è®¤è¯æ¨¡å—ï¼Œæµ‹è¯•ï¼Œå†™æ–‡æ¡£",
  "capabilities": ["coding", "testing", "docs"],
  "tasks": [
    {
      "id": "task-1",
      "capability": "coding",
      "capability_name": "å¼€å‘ä¸å®ç°",
      "description": "å¼€å‘è®¤è¯æ¨¡å—",
      "dependsOn": []
    },
    {
      "id": "task-2",
      "capability": "testing",
      "capability_name": "æµ‹è¯•éªŒè¯",
      "description": "å¯¹å·²å®Œæˆçš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•éªŒè¯ï¼šå¼€å‘è®¤è¯æ¨¡å—ï¼ˆåŒ…æ‹¬åŠŸèƒ½æµ‹è¯•ã€è¾¹ç•Œæ¡ä»¶ã€é”™è¯¯å¤„ç†ï¼‰",
      "dependsOn": ["task-1"]
    },
    {
      "id": "task-3",
      "capability": "docs",
      "capability_name": "æ–‡æ¡£ç¼–å†™",
      "description": "ç¼–å†™ä½¿ç”¨æ–‡æ¡£ï¼šå¼€å‘è®¤è¯æ¨¡å—ï¼ˆåŒ…æ‹¬å®‰è£…ã€é…ç½®ã€ä½¿ç”¨ç¤ºä¾‹ï¼‰",
      "dependsOn": ["task-2"]
    }
  ],
  "task_count": 3
}
```

### ç¤ºä¾‹ 4: äº¤äº’æ¨¡å¼

```bash
$ decompose --interactive

============================================================
Task Decomposer - ä»»åŠ¡æ‹†è§£å·¥å…·
============================================================

è¾“å…¥ 'quit' æˆ– 'exit' é€€å‡º

è¯·è¾“å…¥ä»»åŠ¡è¯·æ±‚: å¼€å‘æ”¯ä»˜ç³»ç»Ÿ
[æ˜¾ç¤ºåˆ†è§£ç»“æœ...]

è¯·è¾“å…¥ä»»åŠ¡è¯·æ±‚: è°ƒç ”ç«äº‰å¯¹æ‰‹
[æ˜¾ç¤ºåˆ†è§£ç»“æœ...]

è¯·è¾“å…¥ä»»åŠ¡è¯·æ±‚: exit

å†è§ï¼
```

## ğŸ¨ é«˜çº§ç”¨æ³•

### 1. é›†æˆåˆ°è„šæœ¬ä¸­

```bash
#!/bin/bash
# analyze_request.sh

REQUEST=$1
TASKS=$(python3 /home/ubuntu/clawd/skills/agent-orchestrator/scripts/task_decomposer.py \
        --json "$REQUEST")

echo "ä»»åŠ¡æ•°é‡: $(echo $TASKS | jq '.task_count')"
echo "èƒ½åŠ›ç±»å‹: $(echo $TASKS | jq -r '.capabilities | join(", ")')"
```

### 2. Python è°ƒç”¨

```python
import sys
sys.path.insert(0, '/home/ubuntu/clawd/skills/agent-orchestrator/scripts')
from task_decomposer import decompose_request

request = "å¼€å‘ç”¨æˆ·è®¤è¯æ¨¡å—ï¼Œæµ‹è¯•ï¼Œå†™æ–‡æ¡£"
tasks = decompose_request(request)

for task in tasks:
    print(f"[{task['capability']}] {task['description']}")
```

### 3. æ‰¹é‡å¤„ç†

```bash
# æ‰¹é‡å¤„ç†å¤šä¸ªè¯·æ±‚
cat requests.txt | while read request; do
    echo "å¤„ç†: $request"
    decompose --json "$request" | jq '.task_count'
done
```

### 4. ä¸ Agent Orchestrator é…åˆ

```bash
# 1. å…ˆç”¨ decomposer å¿«é€Ÿé¢„è§ˆ
decompose "ä½ çš„è¯·æ±‚"

# 2. ç¡®è®¤æ— è¯¯åï¼Œç”¨ orchestrator æ‰§è¡Œ
AO="python3 /home/ubuntu/clawd/skills/agent-orchestrator/scripts/orchestrator.py"
$AO init my-project --goal "ç›®æ ‡"
$AO route my-project --request "ä½ çš„è¯·æ±‚"
$AO decompose my-project --json
```

## ğŸ“Š æ”¯æŒçš„èƒ½åŠ›

æŸ¥çœ‹æ‰€æœ‰èƒ½åŠ›åŠå…³é”®è¯ï¼š

```bash
$ decompose --capabilities

æ”¯æŒçš„èƒ½åŠ›åŠå…³é”®è¯:

research     (èµ„æ–™è°ƒç ”ä¸åˆ†æ)
  è‹±æ–‡: research, analy
  ä¸­æ–‡: åˆ†æ, è°ƒç ”, èµ„æ–™, æŸ¥æ‰¾, æ”¶é›†, æ•´ç†

coding       (å¼€å‘ä¸å®ç°)
  è‹±æ–‡: code, implement, refactor
  ä¸­æ–‡: å¼€å‘, å®ç°, é‡æ„, ä¿®å¤, è„šæœ¬, ç¼–å†™, ç¼–å†™ç¨‹åº, ç¼–ç¨‹

testing      (æµ‹è¯•éªŒè¯)
  è‹±æ–‡: test, pytest, unit test, coverage
  ä¸­æ–‡: æµ‹è¯•, ç”¨ä¾‹, è¦†ç›–ç‡, å›å½’, éªŒè¯

docs         (æ–‡æ¡£ç¼–å†™)
  è‹±æ–‡: doc, readme, documentation
  ä¸­æ–‡: æ–‡æ¡£, è¯´æ˜, æ€»ç»“, å†™æ–‡æ¡£

ops          (è¿ç»´éƒ¨ç½²)
  è‹±æ–‡: deploy, ops, monitor
  ä¸­æ–‡: ä¸Šçº¿, ç›‘æ§, å‘Šè­¦, è¿ç»´, éƒ¨ç½²

image        (è®¾è®¡ä¸ç»˜å›¾)
  è‹±æ–‡: image, poster
  ä¸­æ–‡: å›¾, æµ·æŠ¥, ç»˜å›¾, è®¾è®¡
```

## ğŸ”„ ä¸ Agent Orchestrator çš„åŒºåˆ«

| ç‰¹æ€§ | Task Decomposer | Agent Orchestrator |
|-----|----------------|-------------------|
| **é¡¹ç›®åˆ›å»º** | âŒ ä¸éœ€è¦ | âœ… éœ€è¦ |
| **çŠ¶æ€æŒä¹…åŒ–** | âŒ æ—  | âœ… æœ‰ |
| **Agent åˆ†é…** | âŒ æ—  | âœ… æœ‰ |
| **ä»»åŠ¡æ‰§è¡Œ** | âŒ æ—  | âœ… æœ‰ |
| **å®¡æ‰¹æµç¨‹** | âŒ æ—  | âœ… æœ‰ |
| **å®¡è®¡æ—¥å¿—** | âŒ æ—  | âœ… æœ‰ |
| **é€‚ç”¨åœºæ™¯** | å¿«é€Ÿé¢„è§ˆã€æµ‹è¯• | å®Œæ•´é¡¹ç›®æ‰§è¡Œ |
| **è¾“å‡ºæ ¼å¼** | æ–‡æœ¬/JSON | JSON/æ–‡æœ¬/é€šçŸ¥ |

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### âœ… é€‚åˆä½¿ç”¨ Task Decomposer

- å¿«é€ŸæŸ¥çœ‹ä»»åŠ¡ä¼šå¦‚ä½•åˆ†è§£
- æµ‹è¯•è¯·æ±‚ä¸­çš„å…³é”®è¯è¯†åˆ«
- åœ¨è„šæœ¬ä¸­æ‰¹é‡å¤„ç†è¯·æ±‚
- å­¦ä¹ å’Œç†è§£ä»»åŠ¡åˆ†è§£é€»è¾‘
- é›†æˆåˆ°å…¶ä»–å·¥å…·æˆ–æµç¨‹ä¸­

### âœ… é€‚åˆä½¿ç”¨ Agent Orchestrator

- éœ€è¦å®é™…æ‰§è¡Œä»»åŠ¡
- éœ€è¦å¤šä¸ª agent åä½œ
- éœ€è¦å®¡æ‰¹å’Œå®¡è®¡æµç¨‹
- éœ€è¦æŒä¹…åŒ–é¡¹ç›®çŠ¶æ€
- éœ€è¦é‡è¯•å’Œé”™è¯¯å¤„ç†

## ğŸ”§ å‘½ä»¤è¡Œå‚æ•°

```bash
usage: task_decomposer.py [-h] [--json] [--stdin] [--interactive] [--capabilities] [request]

ä½ç½®å‚æ•°:
  request            è¦åˆ†è§£çš„ä»»åŠ¡è¯·æ±‚

å¯é€‰å‚æ•°:
  -h, --help         æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  --json, -j         ä»¥ JSON æ ¼å¼è¾“å‡ºç»“æœ
  --stdin            ä»æ ‡å‡†è¾“å…¥è¯»å–è¯·æ±‚
  --interactive, -i  å¯åŠ¨äº¤äº’æ¨¡å¼
  --capabilities     æ˜¾ç¤ºæ‰€æœ‰æ”¯æŒçš„èƒ½åŠ›åŠå…¶å…³é”®è¯
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨åˆ«å

```bash
# æ·»åŠ åˆ° ~/.bashrc
alias decompose="python3 /home/ubuntu/clawd/skills/agent-orchestrator/scripts/task_decomposer.py"
alias decompose-json="python3 /home/ubuntu/clawd/skills/agent-orchestrator/scripts/task_decomposer.py --json"
```

### 2. åœ¨ CI/CD ä¸­ä½¿ç”¨

```yaml
# .gitlab-ci.yml
analyze-request:
  script:
    - |
      TASKS=$(decompose --json "$CI_COMMIT_MESSAGE")
      echo "Task count: $(echo $TASKS | jq '.task_count')"
```

### 3. è°ƒè¯•å…³é”®è¯è¯†åˆ«

```bash
# æŸ¥çœ‹å“ªäº›èƒ½åŠ›ä¼šè¢«è¯†åˆ«
decompose "ä½ çš„è¯·æ±‚" | grep "è¯†åˆ«èƒ½åŠ›:"
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Agent Orchestrator ä¸»æ–‡æ¡£](./SKILL.md)
- [ä»»åŠ¡åˆ†è§£ç­–ç•¥è¯¦è§£](./DECOMPOSITION_STRATEGY.md)
- [æ•°æ®æ¨¡å‹](./references/data-model.md)

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜: æ²¡æœ‰è¯†åˆ«åˆ°é¢„æœŸçš„èƒ½åŠ›

**åŸå› **: å…³é”®è¯ä¸åŒ¹é…

**è§£å†³**: ä½¿ç”¨ `--capabilities` æŸ¥çœ‹æ”¯æŒçš„å…³é”®è¯ï¼Œè°ƒæ•´è¯·æ±‚æè¿°

### é—®é¢˜: ä»»åŠ¡æè¿°ä¸å¤Ÿæ¸…æ™°

**åŸå› **: ä¸»é¢˜æå–é€»è¾‘ç§»é™¤äº†å…³é”®ä¿¡æ¯

**è§£å†³**: åœ¨è¯·æ±‚ä¸­ä½¿ç”¨æ›´æ˜ç¡®ã€ç®€æ´çš„æè¿°

### é—®é¢˜: JSON è¾“å‡ºä¹±ç 

**åŸå› **: ç»ˆç«¯ç¼–ç é—®é¢˜

**è§£å†³**: 
```bash
export PYTHONIOENCODING=utf-8
decompose --json "è¯·æ±‚"
```

## ğŸ“ˆ ç»Ÿè®¡

- **ä»£ç è¡Œæ•°**: ~300 è¡Œ
- **æ”¯æŒèƒ½åŠ›**: 6 ç§
- **å…³é”®è¯æ€»æ•°**: 40+ ä¸ªï¼ˆä¸­è‹±æ–‡ï¼‰
- **è¾“å‡ºæ ¼å¼**: 2 ç§ï¼ˆæ–‡æœ¬ã€JSONï¼‰

---

**ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¶é—´**: 2026-02-15  
**ä½œè€…**: Agent Orchestrator Team
